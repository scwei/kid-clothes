<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å°å¤©ä½¿ç«¥è£ âœ¦ Little Angel Kids</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Playfair+Display:ital,wght@0,700;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #FFF8F0;
    --peach: #FFD6B8;
    --coral: #FF7B54;
    --rose: #FF4F7B;
    --mint: #B8F0E0;
    --sky: #C8E8FF;
    --lilac: #E8CCFF;
    --deep: #2D1B4E;
    --mid: #6B4F8A;
    --text: #3D2B5C;
    --card-bg: #FFFFFF;
    --shadow: 0 8px 32px rgba(106,79,138,0.12);
    --radius: 20px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--cream);
    color: var(--text);
    overflow-x: hidden;
  }

  /* â”€â”€â”€ HEADER â”€â”€â”€ */
  header {
    background: linear-gradient(135deg, #FFF0F8 0%, #F0E8FF 50%, #E8F8FF 100%);
    padding: 0 24px;
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom: 2px solid rgba(255,75,123,0.12);
    backdrop-filter: blur(12px);
  }
  .header-inner {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 72px;
    gap: 16px;
  }
  .logo {
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
  }
  .logo-icon {
    width: 44px; height: 44px;
    background: linear-gradient(135deg, var(--rose), var(--coral));
    border-radius: 14px;
    display: flex; align-items: center; justify-content: center;
    font-size: 22px;
    box-shadow: 0 4px 14px rgba(255,75,123,0.35);
  }
  .logo-text {
    line-height: 1.1;
  }
  .logo-text .main { font-size: 18px; font-weight: 900; color: var(--deep); }
  .logo-text .sub { font-size: 11px; font-weight: 600; color: var(--mid); letter-spacing: 1px; }

  nav { display: flex; gap: 8px; align-items: center; }
  nav a {
    text-decoration: none;
    font-size: 14px; font-weight: 700;
    color: var(--mid);
    padding: 6px 14px;
    border-radius: 20px;
    transition: all .2s;
  }
  nav a:hover, nav a.active {
    background: var(--rose);
    color: white;
  }
  .cart-btn {
    background: linear-gradient(135deg, var(--rose), var(--coral));
    color: white !important;
    padding: 8px 18px !important;
    border-radius: 20px;
    font-weight: 800 !important;
    font-size: 13px !important;
    box-shadow: 0 4px 14px rgba(255,75,123,0.3);
    display: flex; align-items: center; gap: 6px;
    cursor: pointer;
    border: none;
    font-family: 'Nunito', sans-serif;
    position: relative;
  }
  .cart-count {
    background: white;
    color: var(--rose);
    width: 20px; height: 20px;
    border-radius: 50%;
    font-size: 11px;
    font-weight: 900;
    display: flex; align-items: center; justify-content: center;
  }

  /* â”€â”€â”€ HERO â”€â”€â”€ */
  .hero {
    background: linear-gradient(160deg, #FFF0F8 0%, #F5E8FF 40%, #E8F5FF 100%);
    padding: 70px 24px 80px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute;
    top: -60px; right: -60px;
    width: 300px; height: 300px;
    background: radial-gradient(circle, rgba(255,75,123,0.12) 0%, transparent 70%);
    border-radius: 50%;
  }
  .hero::after {
    content: '';
    position: absolute;
    bottom: -80px; left: -40px;
    width: 250px; height: 250px;
    background: radial-gradient(circle, rgba(184,240,224,0.3) 0%, transparent 70%);
    border-radius: 50%;
  }
  .hero-badge {
    display: inline-block;
    background: linear-gradient(135deg, var(--peach), var(--lilac));
    padding: 6px 18px;
    border-radius: 20px;
    font-size: 13px; font-weight: 700;
    color: var(--mid);
    margin-bottom: 20px;
    letter-spacing: 0.5px;
  }
  .hero h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(36px, 6vw, 64px);
    color: var(--deep);
    line-height: 1.15;
    margin-bottom: 16px;
  }
  .hero h1 em {
    font-style: italic;
    background: linear-gradient(135deg, var(--rose), var(--coral));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .hero p {
    font-size: 16px;
    color: var(--mid);
    max-width: 480px;
    margin: 0 auto 32px;
    line-height: 1.7;
  }
  .hero-actions { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
  .btn-primary {
    background: linear-gradient(135deg, var(--rose), var(--coral));
    color: white;
    border: none;
    padding: 14px 32px;
    border-radius: 40px;
    font-size: 15px; font-weight: 800;
    cursor: pointer;
    font-family: 'Nunito', sans-serif;
    box-shadow: 0 6px 20px rgba(255,75,123,0.35);
    transition: all .2s;
    text-decoration: none;
    display: inline-block;
  }
  .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 28px rgba(255,75,123,0.4); }
  .btn-outline {
    background: white;
    color: var(--rose);
    border: 2px solid var(--rose);
    padding: 12px 28px;
    border-radius: 40px;
    font-size: 15px; font-weight: 800;
    cursor: pointer;
    font-family: 'Nunito', sans-serif;
    transition: all .2s;
    text-decoration: none;
    display: inline-block;
  }
  .btn-outline:hover { background: var(--rose); color: white; }

  /* floating stickers */
  .sticker {
    position: absolute;
    font-size: 32px;
    opacity: 0.5;
    animation: float 4s ease-in-out infinite;
    pointer-events: none;
  }
  .sticker:nth-child(1) { top: 15%; left: 5%; animation-delay: 0s; }
  .sticker:nth-child(2) { top: 20%; right: 8%; animation-delay: 1s; }
  .sticker:nth-child(3) { bottom: 20%; left: 8%; animation-delay: 2s; }
  .sticker:nth-child(4) { bottom: 15%; right: 5%; animation-delay: 0.5s; }
  @keyframes float {
    0%, 100% { transform: translateY(0px) rotate(-5deg); }
    50% { transform: translateY(-12px) rotate(5deg); }
  }

  /* â”€â”€â”€ FILTERS â”€â”€â”€ */
  .filters {
    background: white;
    padding: 20px 24px;
    border-bottom: 1px solid rgba(106,79,138,0.08);
  }
  .filters-inner {
    max-width: 1200px; margin: 0 auto;
    display: flex; gap: 8px; flex-wrap: wrap; align-items: center;
  }
  .filter-label { font-size: 13px; font-weight: 700; color: var(--mid); margin-right: 4px; }
  .filter-btn {
    padding: 7px 16px;
    border-radius: 20px;
    border: 1.5px solid rgba(106,79,138,0.2);
    background: white;
    font-size: 13px; font-weight: 700;
    color: var(--mid);
    cursor: pointer;
    font-family: 'Nunito', sans-serif;
    transition: all .2s;
  }
  .filter-btn:hover, .filter-btn.active {
    background: var(--lilac);
    border-color: var(--mid);
    color: var(--deep);
  }

  /* â”€â”€â”€ PRODUCTS â”€â”€â”€ */
  .section {
    max-width: 1200px;
    margin: 0 auto;
    padding: 48px 24px;
  }
  .section-header {
    display: flex; align-items: baseline; justify-content: space-between;
    margin-bottom: 32px;
    flex-wrap: wrap; gap: 8px;
  }
  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 28px;
    color: var(--deep);
  }
  .section-subtitle { font-size: 13px; color: var(--mid); font-weight: 600; }

  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 24px;
  }

  .product-card {
    background: white;
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow);
    transition: all .3s;
    cursor: pointer;
    position: relative;
  }
  .product-card:hover { transform: translateY(-6px); box-shadow: 0 16px 40px rgba(106,79,138,0.18); }

  .product-img {
    width: 100%; aspect-ratio: 3/4;
    background: linear-gradient(135deg, var(--sky), var(--lilac));
    position: relative;
    overflow: hidden;
    display: flex; align-items: center; justify-content: center;
  }
  .product-img img {
    width: 100%; height: 100%;
    object-fit: cover;
    transition: transform .4s;
  }
  .product-card:hover .product-img img { transform: scale(1.05); }
  .product-img-placeholder {
    font-size: 48px;
    opacity: 0.4;
  }

  .product-tag {
    position: absolute;
    top: 12px; left: 12px;
    background: var(--rose);
    color: white;
    font-size: 11px; font-weight: 800;
    padding: 3px 10px;
    border-radius: 10px;
  }
  .product-fav {
    position: absolute;
    top: 10px; right: 10px;
    width: 32px; height: 32px;
    background: white;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    cursor: pointer;
    border: none;
    transition: transform .2s;
  }
  .product-fav:hover { transform: scale(1.15); }

  .product-info { padding: 16px; }
  .product-name { font-size: 15px; font-weight: 800; color: var(--deep); margin-bottom: 4px; }
  .product-desc { font-size: 12px; color: var(--mid); margin-bottom: 10px; line-height: 1.5; }

  .sizes-row { display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 12px; }
  .size-chip {
    padding: 3px 10px;
    border-radius: 8px;
    border: 1.5px solid rgba(106,79,138,0.2);
    font-size: 11px; font-weight: 700;
    color: var(--mid);
    cursor: pointer;
    background: white;
    transition: all .15s;
    font-family: 'Nunito', sans-serif;
  }
  .size-chip:hover { border-color: var(--rose); color: var(--rose); }
  .size-chip.selected { background: var(--rose); border-color: var(--rose); color: white; }
  .size-chip.oos { opacity: 0.35; cursor: not-allowed; text-decoration: line-through; }

  .product-price { font-size: 17px; font-weight: 900; color: var(--coral); margin-bottom: 12px; }

  .add-cart-btn {
    width: 100%;
    background: linear-gradient(135deg, var(--rose), var(--coral));
    color: white;
    border: none;
    padding: 10px;
    border-radius: 12px;
    font-size: 13px; font-weight: 800;
    cursor: pointer;
    font-family: 'Nunito', sans-serif;
    transition: all .2s;
    display: flex; align-items: center; justify-content: center; gap: 6px;
  }
  .add-cart-btn:hover { opacity: 0.9; transform: scale(1.01); }
  .add-cart-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; }

  /* â”€â”€â”€ CART SIDEBAR â”€â”€â”€ */
  .cart-overlay {
    position: fixed; inset: 0;
    background: rgba(45,27,78,0.4);
    z-index: 200;
    opacity: 0; pointer-events: none;
    transition: opacity .3s;
    backdrop-filter: blur(4px);
  }
  .cart-overlay.open { opacity: 1; pointer-events: all; }

  .cart-sidebar {
    position: fixed;
    right: 0; top: 0; bottom: 0;
    width: min(400px, 95vw);
    background: white;
    z-index: 201;
    transform: translateX(100%);
    transition: transform .3s cubic-bezier(.4,0,.2,1);
    display: flex; flex-direction: column;
    border-radius: 24px 0 0 24px;
    overflow: hidden;
  }
  .cart-sidebar.open { transform: translateX(0); }

  .cart-header {
    background: linear-gradient(135deg, #FFF0F8, #F5E8FF);
    padding: 20px 24px;
    display: flex; align-items: center; justify-content: space-between;
    border-bottom: 1px solid rgba(106,79,138,0.1);
  }
  .cart-header h2 { font-family: 'Playfair Display', serif; font-size: 22px; color: var(--deep); }
  .close-btn {
    width: 36px; height: 36px;
    border-radius: 50%;
    border: none;
    background: rgba(255,75,123,0.1);
    color: var(--rose);
    font-size: 18px;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    font-weight: 700;
  }

  .cart-items { flex: 1; overflow-y: auto; padding: 16px 24px; }
  .cart-empty {
    text-align: center;
    padding: 60px 20px;
    color: var(--mid);
  }
  .cart-empty .icon { font-size: 48px; margin-bottom: 12px; }
  .cart-empty p { font-size: 14px; font-weight: 600; }

  .cart-item {
    display: flex; gap: 12px; align-items: flex-start;
    padding: 12px 0;
    border-bottom: 1px solid rgba(106,79,138,0.06);
  }
  .cart-item-img {
    width: 60px; height: 75px;
    border-radius: 10px;
    background: linear-gradient(135deg, var(--sky), var(--lilac));
    overflow: hidden; flex-shrink: 0;
  }
  .cart-item-img img { width: 100%; height: 100%; object-fit: cover; }
  .cart-item-info { flex: 1; }
  .cart-item-name { font-size: 14px; font-weight: 800; color: var(--deep); }
  .cart-item-size { font-size: 12px; color: var(--mid); font-weight: 600; margin: 2px 0 8px; }
  .cart-item-remove {
    background: none; border: none;
    color: #ccc; font-size: 18px;
    cursor: pointer;
    padding: 0 4px;
    transition: color .2s;
  }
  .cart-item-remove:hover { color: var(--rose); }

  .cart-footer {
    padding: 20px 24px;
    border-top: 1px solid rgba(106,79,138,0.1);
    background: #FAFAFA;
  }
  .cart-summary { font-size: 13px; color: var(--mid); margin-bottom: 6px; font-weight: 600; }
  .cart-count-text { font-size: 14px; font-weight: 800; color: var(--deep); margin-bottom: 16px; }

  .line-btn {
    width: 100%;
    background: #06C755;
    color: white;
    border: none;
    padding: 14px;
    border-radius: 14px;
    font-size: 15px; font-weight: 800;
    cursor: pointer;
    font-family: 'Nunito', sans-serif;
    display: flex; align-items: center; justify-content: center; gap: 10px;
    transition: all .2s;
    margin-bottom: 8px;
  }
  .line-btn:hover { background: #05b54c; transform: translateY(-1px); }
  .line-btn svg { width: 22px; height: 22px; fill: white; }
  .line-note { font-size: 11px; color: var(--mid); text-align: center; line-height: 1.5; }

  /* â”€â”€â”€ ADMIN PANEL â”€â”€â”€ */
  .admin-overlay {
    position: fixed; inset: 0;
    background: rgba(45,27,78,0.5);
    z-index: 300;
    opacity: 0; pointer-events: none;
    transition: opacity .3s;
    backdrop-filter: blur(6px);
  }
  .admin-overlay.open { opacity: 1; pointer-events: all; }

  .admin-modal {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%) scale(0.95);
    width: min(600px, 95vw);
    max-height: 90vh;
    background: white;
    border-radius: 24px;
    z-index: 301;
    overflow-y: auto;
    opacity: 0; pointer-events: none;
    transition: all .3s cubic-bezier(.4,0,.2,1);
    box-shadow: 0 24px 80px rgba(45,27,78,0.25);
  }
  .admin-modal.open {
    opacity: 1; pointer-events: all;
    transform: translate(-50%, -50%) scale(1);
  }

  .admin-modal-header {
    background: linear-gradient(135deg, var(--deep), var(--mid));
    padding: 20px 24px;
    display: flex; align-items: center; justify-content: space-between;
    color: white;
    border-radius: 24px 24px 0 0;
  }
  .admin-modal-header h2 { font-size: 18px; font-weight: 800; }
  .admin-modal-body { padding: 24px; }

  .product-list-admin { display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px; }
  .product-admin-item {
    display: flex; gap: 12px; align-items: center;
    padding: 12px;
    border: 1.5px solid rgba(106,79,138,0.15);
    border-radius: 14px;
    background: #FAFAFA;
  }
  .product-admin-img {
    width: 52px; height: 64px;
    border-radius: 8px;
    background: linear-gradient(135deg, var(--sky), var(--lilac));
    overflow: hidden; flex-shrink: 0;
  }
  .product-admin-img img { width: 100%; height: 100%; object-fit: cover; }
  .product-admin-info { flex: 1; }
  .product-admin-info input, .product-admin-info textarea {
    width: 100%;
    border: 1.5px solid rgba(106,79,138,0.2);
    border-radius: 8px;
    padding: 6px 10px;
    font-size: 13px;
    font-family: 'Nunito', sans-serif;
    color: var(--text);
    margin-bottom: 4px;
    outline: none;
    transition: border-color .2s;
  }
  .product-admin-info input:focus,
  .product-admin-info textarea:focus { border-color: var(--rose); }

  .form-group { margin-bottom: 16px; }
  .form-group label { font-size: 13px; font-weight: 700; color: var(--mid); display: block; margin-bottom: 6px; }
  .form-group input, .form-group textarea, .form-group select {
    width: 100%;
    border: 1.5px solid rgba(106,79,138,0.2);
    border-radius: 12px;
    padding: 10px 14px;
    font-size: 14px;
    font-family: 'Nunito', sans-serif;
    color: var(--text);
    outline: none;
    transition: border-color .2s;
    background: white;
  }
  .form-group input:focus,
  .form-group textarea:focus { border-color: var(--rose); box-shadow: 0 0 0 3px rgba(255,75,123,0.08); }

  .upload-area {
    border: 2px dashed rgba(106,79,138,0.3);
    border-radius: 14px;
    padding: 32px;
    text-align: center;
    cursor: pointer;
    transition: all .2s;
    background: #FAFAFA;
  }
  .upload-area:hover { border-color: var(--rose); background: rgba(255,75,123,0.03); }
  .upload-area .upload-icon { font-size: 36px; margin-bottom: 10px; }
  .upload-area p { font-size: 13px; color: var(--mid); font-weight: 600; }
  .upload-area input { display: none; }
  .upload-preview {
    width: 100%; max-height: 200px;
    object-fit: contain;
    border-radius: 10px;
    margin-top: 10px;
  }

  .sizes-editor { display: flex; gap: 6px; flex-wrap: wrap; }
  .size-toggle {
    padding: 6px 14px;
    border-radius: 10px;
    border: 1.5px solid rgba(106,79,138,0.2);
    background: white;
    font-size: 12px; font-weight: 700;
    color: var(--mid);
    cursor: pointer;
    font-family: 'Nunito', sans-serif;
    transition: all .15s;
  }
  .size-toggle.on { background: var(--deep); border-color: var(--deep); color: white; }

  .admin-actions { display: flex; gap: 8px; }
  .btn-save {
    flex: 1;
    background: linear-gradient(135deg, var(--rose), var(--coral));
    color: white;
    border: none;
    padding: 12px;
    border-radius: 12px;
    font-size: 14px; font-weight: 800;
    cursor: pointer;
    font-family: 'Nunito', sans-serif;
    transition: all .2s;
  }
  .btn-save:hover { opacity: 0.9; }
  .btn-cancel {
    background: #F0F0F0;
    color: var(--mid);
    border: none;
    padding: 12px 20px;
    border-radius: 12px;
    font-size: 14px; font-weight: 800;
    cursor: pointer;
    font-family: 'Nunito', sans-serif;
  }
  .btn-delete {
    background: #FFE8E8;
    color: #E33;
    border: none;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 20px;
    cursor: pointer;
    transition: all .2s;
  }
  .btn-delete:hover { background: #FFD0D0; }
  .btn-edit-item {
    background: var(--lilac);
    color: var(--mid);
    border: none;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    font-weight: 700;
    font-family: 'Nunito', sans-serif;
  }

  /* tabs */
  .admin-tabs { display: flex; gap: 4px; margin-bottom: 20px; background: #F5F0FF; border-radius: 12px; padding: 4px; }
  .admin-tab {
    flex: 1;
    padding: 8px;
    border: none;
    background: none;
    border-radius: 10px;
    font-size: 13px; font-weight: 700;
    color: var(--mid);
    cursor: pointer;
    font-family: 'Nunito', sans-serif;
    transition: all .2s;
  }
  .admin-tab.active { background: white; color: var(--deep); box-shadow: 0 2px 8px rgba(0,0,0,0.08); }

  /* â”€â”€â”€ LINE CONFIG â”€â”€â”€ */
  .line-config {
    background: linear-gradient(135deg, rgba(6,199,85,0.08), rgba(6,199,85,0.03));
    border: 1.5px solid rgba(6,199,85,0.2);
    border-radius: 14px;
    padding: 16px;
    margin-bottom: 16px;
    display: flex; gap: 12px; align-items: center;
    flex-wrap: wrap;
  }
  .line-config-icon { font-size: 28px; }
  .line-config-info { flex: 1; }
  .line-config-info label { font-size: 12px; font-weight: 700; color: #05a044; }
  .line-config-info input {
    display: block;
    width: 100%;
    border: 1.5px solid rgba(6,199,85,0.3);
    border-radius: 8px;
    padding: 7px 12px;
    font-size: 13px;
    font-family: 'Nunito', sans-serif;
    margin-top: 4px;
    outline: none;
    background: white;
    color: var(--text);
  }

  /* â”€â”€â”€ FOOTER â”€â”€â”€ */
  footer {
    background: var(--deep);
    color: rgba(255,255,255,0.7);
    text-align: center;
    padding: 32px 24px;
    font-size: 13px;
    line-height: 2;
  }
  footer strong { color: white; font-size: 15px; }

  /* â”€â”€â”€ TOAST â”€â”€â”€ */
  .toast {
    position: fixed;
    bottom: 24px; left: 50%;
    transform: translateX(-50%) translateY(80px);
    background: var(--deep);
    color: white;
    padding: 12px 24px;
    border-radius: 40px;
    font-size: 14px; font-weight: 700;
    z-index: 999;
    transition: transform .3s cubic-bezier(.4,0,.2,1);
    white-space: nowrap;
    box-shadow: 0 8px 24px rgba(45,27,78,0.3);
  }
  .toast.show { transform: translateX(-50%) translateY(0); }

  /* â”€â”€â”€ RESPONSIVE â”€â”€â”€ */
  @media (max-width: 600px) {
    nav a:not(.cart-btn) { display: none; }
    .hero { padding: 48px 20px 56px; }
    .products-grid { grid-template-columns: repeat(2, 1fr); gap: 16px; }
    .admin-tabs { display: none; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <a class="logo" href="#">
      <div class="logo-icon">ğŸ‘¼</div>
      <div class="logo-text">
        <div class="main">å°å¤©ä½¿ç«¥è£</div>
        <div class="sub">LITTLE ANGEL KIDS</div>
      </div>
    </a>
    <nav>
      <a href="#" class="active">å…¨éƒ¨å•†å“</a>
      <a href="#" onclick="showAbout()">é—œæ–¼æˆ‘å€‘</a>
      <button class="cart-btn" onclick="toggleCart()">
        ğŸ›ï¸ é¸è³¼æ¸…å–®
        <span class="cart-count" id="cartCount">0</span>
      </button>
      <button class="cart-btn" onclick="toggleAdmin()" style="background: linear-gradient(135deg,var(--mid),var(--deep)); margin-left:4px;">
        âš™ï¸ ç®¡ç†
      </button>
    </nav>
  </div>
</header>

<!-- HERO -->
<section class="hero">
  <div class="sticker">ğŸŒ¸</div>
  <div class="sticker">ğŸ€</div>
  <div class="sticker">â­</div>
  <div class="sticker">ğŸŒˆ</div>
  <div class="hero-badge">âœ¨ å°ç£åœ¨åœ° Â· ç²¾é¸ç«¥è£ âœ¨</div>
  <h1>ç©¿ä¸Šå¿«æ¨‚<br>æ¯å¤©éƒ½æ˜¯<em>å°å¤©ä½¿</em></h1>
  <p>ç²¾å¿ƒæŒ‘é¸èˆ’é©ã€å¥½çœ‹ã€è€ç©¿çš„ç«¥è£ï¼Œè®“å¯¶è²å¾é ­åˆ°è…³éƒ½å……æ»¿æ´»åŠ›èˆ‡ç¬‘å®¹ ğŸ’•</p>
  <div class="hero-actions">
    <a href="#products" class="btn-primary">ç«‹åˆ»é€›é€› â†’</a>
    <button class="btn-outline" onclick="toggleCart()">æŸ¥çœ‹é¸è³¼æ¸…å–®</button>
  </div>
</section>

<!-- FILTERS -->
<div class="filters">
  <div class="filters-inner">
    <span class="filter-label">ç¯©é¸ï¼š</span>
    <button class="filter-btn active" onclick="filterProducts('all', this)">å…¨éƒ¨</button>
    <button class="filter-btn" onclick="filterProducts('ä¸Šè¡£', this)">ä¸Šè¡£</button>
    <button class="filter-btn" onclick="filterProducts('è¤²å­', this)">è¤²å­</button>
    <button class="filter-btn" onclick="filterProducts('æ´‹è£', this)">æ´‹è£</button>
    <button class="filter-btn" onclick="filterProducts('å¥—è£', this)">å¥—è£</button>
    <button class="filter-btn" onclick="filterProducts('å¤–å¥—', this)">å¤–å¥—</button>
  </div>
</div>

<!-- PRODUCTS -->
<div class="section" id="products">
  <div class="section-header">
    <h2 class="section-title">ğŸ§¸ ç²¾é¸å•†å“</h2>
    <span class="section-subtitle" id="productCount">å…± 0 ä»¶å•†å“</span>
  </div>
  <div class="products-grid" id="productsGrid">
    <!-- products rendered here -->
  </div>
</div>

<!-- FOOTER -->
<footer>
  <strong>ğŸ‘¼ å°å¤©ä½¿ç«¥è£ Little Angel Kids</strong><br>
  æœ‰ä»»ä½•å•é¡Œæ­¡è¿é€é LINE è¯ç¹«æˆ‘å€‘ ğŸ’¬<br>
  <small>Â© 2025 å°å¤©ä½¿ç«¥è£ Â· ç”¨æ„›æ‰“é€ æ¯å¥—è¡£è£³</small>
</footer>

<!-- CART SIDEBAR -->
<div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>
<div class="cart-sidebar" id="cartSidebar">
  <div class="cart-header">
    <h2>ğŸ›ï¸ é¸è³¼æ¸…å–®</h2>
    <button class="close-btn" onclick="toggleCart()">âœ•</button>
  </div>
  <div class="cart-items" id="cartItems">
    <div class="cart-empty">
      <div class="icon">ğŸ§º</div>
      <p>é‚„æ²’æœ‰é¸è³¼ä»»ä½•å•†å“<br>å¿«å»æŒ‘ä¸€æŒ‘å§ï¼</p>
    </div>
  </div>
  <div class="cart-footer">
    <div class="cart-count-text" id="cartCountText">å·²é¸ 0 ä»¶å•†å“</div>
    <button class="line-btn" onclick="sendToLine()">
      <svg viewBox="0 0 24 24"><path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.281.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.070 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/></svg>
      å‚³é€åˆ° LINE è©¢å•
    </button>
    <p class="line-note">é»æ“Šå¾Œå°‡è·³è½‰ LINEï¼Œç³»çµ±æœƒè‡ªå‹•å¸¶å…¥æ‚¨é¸çš„å•†å“è³‡è¨Š ğŸ€</p>
  </div>
</div>

<!-- ADMIN MODAL -->
<div class="admin-overlay" id="adminOverlay" onclick="toggleAdmin()"></div>
<div class="admin-modal" id="adminModal">
  <div class="admin-modal-header">
    <h2>âš™ï¸ å•†å“ç®¡ç†å¾Œå°</h2>
    <button class="close-btn" style="background:rgba(255,255,255,0.15);color:white;" onclick="toggleAdmin()">âœ•</button>
  </div>
  <div class="admin-modal-body">
    <div class="admin-tabs">
      <button class="admin-tab active" onclick="switchTab('list', this)">ğŸ“‹ å•†å“åˆ—è¡¨</button>
      <button class="admin-tab" onclick="switchTab('add', this)">â• æ–°å¢å•†å“</button>
      <button class="admin-tab" onclick="switchTab('settings', this)">ğŸ”§ è¨­å®š</button>
    </div>

    <!-- Tab: List -->
    <div id="tab-list">
      <div class="product-list-admin" id="adminProductList"></div>
      <button class="btn-primary" style="width:100%;margin-top:8px;" onclick="switchTab('add', document.querySelector('.admin-tab:nth-child(2)'))">â• æ–°å¢å•†å“</button>
    </div>

    <!-- Tab: Add/Edit -->
    <div id="tab-add" style="display:none;">
      <div id="editingId" data-id=""></div>
      <div class="form-group">
        <label>ğŸ“¸ å•†å“åœ–ç‰‡</label>
        <div class="upload-area" id="uploadArea" onclick="openCloudinaryWidget()">
          <div class="upload-icon" id="uploadIcon">â˜ï¸</div>
          <p id="uploadText">é»æ“Šä¸Šå‚³åœ–ç‰‡åˆ°é›²ç«¯<br><small style="font-size:11px;opacity:.7;">åœ–ç‰‡å°‡å„²å­˜æ–¼ Cloudinaryï¼Œæ‰€æœ‰äººéƒ½çœ‹å¾—åˆ°</small></p>
          <img id="imgPreview" class="upload-preview" style="display:none;">
          <div id="uploadStatus" style="display:none;margin-top:8px;font-size:12px;color:var(--mid);font-weight:600;"></div>
        </div>
        <div id="cloudinaryNotice" style="display:none;margin-top:8px;background:#FFF3CD;border:1px solid #FFEAA7;border-radius:8px;padding:10px;font-size:12px;color:#856404;line-height:1.6;">
          âš ï¸ å°šæœªè¨­å®š Cloudinaryï¼è«‹å…ˆåˆ° <b>âš™ï¸ ç®¡ç† â†’ è¨­å®š</b> å¡«å…¥ Cloud Name å’Œ Upload Presetã€‚
        </div>
      </div>
      <div class="form-group">
        <label>ğŸ‘• å•†å“åç¨±</label>
        <input type="text" id="productName" placeholder="ä¾‹ï¼šç²‰å½©å…”å…”ä¸Šè¡£">
      </div>
      <div class="form-group">
        <label>ğŸ“ å•†å“æè¿°ï¼ˆé¸å¡«ï¼‰</label>
        <input type="text" id="productDesc" placeholder="ä¾‹ï¼šç´”æ£‰æè³ªï¼Œè¦ªè†šèˆ’é©">
      </div>
      <div class="form-group">
        <label>ğŸ·ï¸ åˆ†é¡</label>
        <select id="productCat">
          <option>ä¸Šè¡£</option>
          <option>è¤²å­</option>
          <option>æ´‹è£</option>
          <option>å¥—è£</option>
          <option>å¤–å¥—</option>
        </select>
      </div>
      <div class="form-group">
        <label>ğŸ’° å”®åƒ¹ï¼ˆé¸å¡«ï¼‰</label>
        <input type="text" id="productPrice" placeholder="ä¾‹ï¼šNT$350">
      </div>
      <div class="form-group">
        <label>ğŸ“ å¯é¸å°ºå¯¸ï¼ˆé»æ“Šé–‹å•Ÿ/é—œé–‰ï¼‰</label>
        <div class="sizes-editor" id="sizesEditor"></div>
      </div>
      <div class="form-group">
        <label>ğŸ”– æ¨™ç±¤ï¼ˆé¸å¡«ï¼‰</label>
        <input type="text" id="productTag" placeholder="ä¾‹ï¼šæ–°å“ã€ç†±éŠ·ã€ç‰¹åƒ¹">
      </div>
      <div class="admin-actions">
        <button class="btn-cancel" onclick="cancelEdit()">å–æ¶ˆ</button>
        <button class="btn-save" onclick="saveProduct()">ğŸ’¾ å„²å­˜å•†å“</button>
      </div>
    </div>

    <!-- Tab: Settings -->
    <div id="tab-settings" style="display:none;">

      <!-- Cloudinary -->
      <div style="background:linear-gradient(135deg,#E8F4FD,#F0E8FF);border-radius:14px;padding:16px;margin-bottom:16px;">
        <div style="font-size:15px;font-weight:800;color:var(--deep);margin-bottom:4px;">â˜ï¸ Cloudinary åœ–ç‰‡é›²ç«¯è¨­å®š</div>
        <div style="font-size:12px;color:var(--mid);margin-bottom:12px;line-height:1.6;">
          å…è²»ç”³è«‹ï¼š<a href="https://cloudinary.com" target="_blank" style="color:var(--rose);font-weight:700;">cloudinary.com</a><br>
          ç™»å…¥å¾Œ Dashboard å¯æ‰¾åˆ° Cloud Nameï¼›<br>
          Upload Preset è«‹åˆ° Settings â†’ Upload â†’ Add upload presetï¼ŒMode è¨­ <b>Unsigned</b>
        </div>
        <div class="form-group" style="margin-bottom:10px;">
          <label>Cloud Name</label>
          <input type="text" id="cloudName" placeholder="ä¾‹ï¼šmy-cloud-abc123" oninput="saveCloudinarySettings()">
        </div>
        <div class="form-group" style="margin-bottom:0;">
          <label>Upload Presetï¼ˆUnsignedï¼‰</label>
          <input type="text" id="uploadPreset" placeholder="ä¾‹ï¼škids_shop_unsigned" oninput="saveCloudinarySettings()">
        </div>
        <div id="cloudinaryStatusMsg" style="margin-top:10px;font-size:12px;font-weight:700;"></div>
      </div>

      <!-- LINE -->
      <div class="line-config">
        <div class="line-config-icon">ğŸ’¬</div>
        <div class="line-config-info">
          <label>LINE ID æˆ– LINE é€£çµ</label>
          <input type="text" id="lineId" placeholder="@your_line_id æˆ– line.me/ti/p/xxxxx" oninput="saveLineId()">
        </div>
      </div>
      <p style="font-size:12px;color:var(--mid);line-height:1.7;">
        ğŸ”¹ è¼¸å…¥æ‚¨çš„ LINE IDï¼ˆä¾‹ï¼š@angelkidsï¼‰æˆ– LINE å®˜æ–¹å¸³è™Ÿé€£çµ<br>
        ğŸ”¹ é¡§å®¢é¸å®Œå•†å“å¾Œï¼Œç³»çµ±æœƒå¸¶è‘—å•†å“æ¸…å–®è·³è½‰åˆ° LINE<br>
        ğŸ”¹ æ‚¨å°±å¯ä»¥ç›´æ¥åœ¨ LINE ä¸Šå›è¦†ç¢ºèªåº«å­˜å›‰ï¼
      </p>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const GAS_URL = 'https://script.google.com/macros/s/AKfycbxrISlpAWwQ7zn4IYAY_R6kQxMO9o6fex7gdXzQ9M3vV3PuFuaBhS-DtjN_JfpLLC-OpQ/exec';
const AVAILABLE_SIZES = ['80', '90', '100', '110', '120', '130', '140', '150'];

let products = [];
let cart = [];
let lineId = localStorage.getItem('lineId') || '';
let editingId = null;
let currentFilter = 'all';
let cloudName = localStorage.getItem('cloudName') || '';
let uploadPreset = localStorage.getItem('uploadPreset') || '';
let currentUploadedUrl = '';

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GOOGLE SHEETS API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function apiGet() {
  const res = await fetch(GAS_URL);
  const data = await res.json();
  return data.map(p => {
    let sizes = [];
    if (Array.isArray(p.sizes)) {
      sizes = p.sizes.map(s => String(s).trim()).filter(s => s);
    } else if (p.sizes) {
      // è™•ç†é€—è™Ÿã€ä¸­æ–‡é€—è™Ÿã€ç©ºæ ¼ç­‰å„ç¨®åˆ†éš”
      sizes = String(p.sizes).split(/[,ï¼Œ\s]+/).map(s => s.trim()).filter(s => s);
    }
    return { ...p, sizes };
  });
}

async function apiPost(body) {
  const res = await fetch(GAS_URL, {
    method: 'POST',
    body: JSON.stringify(body)
  });
  return res.json();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LOAD PRODUCTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function loadProducts() {
  const grid = document.getElementById('productsGrid');
  grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:60px;color:var(--mid);">
    <div style="font-size:32px;margin-bottom:12px;">â³</div>
    <div style="font-weight:700;">è¼‰å…¥å•†å“ä¸­...</div>
  </div>`;
  try {
    products = await apiGet();
    renderProducts(currentFilter);
  } catch(e) {
    grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:60px;color:var(--mid);">
      <div style="font-size:32px;margin-bottom:12px;">ğŸ˜”</div>
      <div style="font-weight:700;">è¼‰å…¥å¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†é é¢</div>
    </div>`;
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderProducts(filter = 'all') {
  currentFilter = filter;
  const grid = document.getElementById('productsGrid');
  const filtered = filter === 'all' ? products : products.filter(p => p.category === filter);
  document.getElementById('productCount').textContent = `å…± ${filtered.length} ä»¶å•†å“`;

  if (filtered.length === 0) {
    grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:60px;color:var(--mid);font-weight:600;">æ­¤åˆ†é¡æš«ç„¡å•†å“ ğŸ˜Š</div>`;
    return;
  }

  grid.innerHTML = filtered.map(p => {
    const sizes = Array.isArray(p.sizes) ? p.sizes : [];
    return `
    <div class="product-card" data-id="${p.id}">
      <div class="product-img">
        ${p.img ? `<img src="${p.img}" alt="${p.name}">` : `<div class="product-img-placeholder">ğŸ‘•</div>`}
        ${p.tag ? `<div class="product-tag">${p.tag}</div>` : ''}
      </div>
      <div class="product-info">
        <div class="product-name">${p.name}</div>
        <div class="product-desc">${p.desc || p.category}</div>
        <div class="sizes-row" id="sizes-${p.id}">
          ${sizes.map(s => `<button class="size-chip" onclick="selectSize('${p.id}', '${s}', this)">${s}</button>`).join('')}
        </div>
        ${p.price ? `<div class="product-price">${p.price}</div>` : ''}
        <button class="add-cart-btn" onclick="addToCart('${p.id}')">ğŸ›ï¸ åŠ å…¥é¸è³¼æ¸…å–®</button>
      </div>
    </div>`;
  }).join('');
}

let selectedSizes = {};

function selectSize(id, size, el) {
  document.querySelectorAll(`#sizes-${id} .size-chip`).forEach(c => c.classList.remove('selected'));
  el.classList.add('selected');
  selectedSizes[id] = size;
}

function addToCart(id) {
  const p = products.find(x => String(x.id) === String(id));
  const size = selectedSizes[id];
  if (!size) { showToast('âš ï¸ è«‹å…ˆé¸æ“‡å°ºå¯¸ï¼'); return; }
  cart.push({ ...p, selectedSize: size, cartId: Date.now() });
  updateCartUI();
  showToast(`âœ… ${p.name} (${size}) å·²åŠ å…¥æ¸…å–®ï¼`);
}

function removeFromCart(cartId) {
  cart = cart.filter(x => x.cartId !== cartId);
  updateCartUI();
}

function updateCartUI() {
  const count = cart.length;
  document.getElementById('cartCount').textContent = count;
  document.getElementById('cartCountText').textContent = `å·²é¸ ${count} ä»¶å•†å“`;
  const container = document.getElementById('cartItems');
  if (count === 0) {
    container.innerHTML = `<div class="cart-empty"><div class="icon">ğŸ§º</div><p>é‚„æ²’æœ‰é¸è³¼ä»»ä½•å•†å“<br>å¿«å»æŒ‘ä¸€æŒ‘å§ï¼</p></div>`;
    return;
  }
  container.innerHTML = cart.map(item => `
    <div class="cart-item">
      <div class="cart-item-img">${item.img ? `<img src="${item.img}">` : ''}</div>
      <div class="cart-item-info">
        <div class="cart-item-name">${item.name}</div>
        <div class="cart-item-size">å°ºå¯¸ï¼š${item.selectedSize} ï½œ ${item.category}</div>
      </div>
      <button class="cart-item-remove" onclick="removeFromCart(${item.cartId})">Ã—</button>
    </div>
  `).join('');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function sendToLine() {
  if (cart.length === 0) { showToast('âŒ è«‹å…ˆé¸è³¼å•†å“ï¼'); return; }
  const msg = 'æ‚¨å¥½ï¼æˆ‘æƒ³è©¢å•ä»¥ä¸‹å•†å“æ˜¯å¦æœ‰åº«å­˜ï¼š\n\n'
    + cart.map((item, i) => `${i+1}. ${item.name} / å°ºå¯¸ ${item.selectedSize}`).join('\n')
    + '\n\nè«‹å•ä»¥ä¸Šå•†å“æœ‰è²¨å—ï¼Ÿè¬è¬ ğŸ™';
  const encoded = encodeURIComponent(msg);
  let url = '';
  if (lineId) {
    const id = lineId.startsWith('@') ? lineId.slice(1) : lineId;
    url = `https://line.me/R/ti/p/${id}?text=${encoded}`;
  } else {
    url = `https://line.me/R/msg/text/?${encoded}`;
  }
  window.open(url, '_blank');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FILTERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function filterProducts(cat, btn) {
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderProducts(cat);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CART TOGGLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleCart() {
  document.getElementById('cartOverlay').classList.toggle('open');
  document.getElementById('cartSidebar').classList.toggle('open');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ADMIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleAdmin() {
  document.getElementById('adminOverlay').classList.toggle('open');
  document.getElementById('adminModal').classList.toggle('open');
  renderAdminList();
  document.getElementById('lineId').value = lineId;
  document.getElementById('cloudName').value = cloudName;
  document.getElementById('uploadPreset').value = uploadPreset;
  if (cloudName && uploadPreset) {
    const msg = document.getElementById('cloudinaryStatusMsg');
    msg.style.color = '#05a044';
    msg.textContent = 'âœ… å·²è¨­å®šå¥½ï¼Œå¯ä»¥ä¸Šå‚³åœ–ç‰‡ï¼';
  }
}

function saveLineId() {
  lineId = document.getElementById('lineId').value;
  localStorage.setItem('lineId', lineId);
}

function switchTab(name, btn) {
  ['list','add','settings'].forEach(t => {
    document.getElementById('tab-'+t).style.display = t === name ? 'block' : 'none';
  });
  document.querySelectorAll('.admin-tab').forEach(b => b.classList.remove('active'));
  if (btn) btn.classList.add('active');
  // åªæœ‰åœ¨ã€Œä¸æ˜¯ç·¨è¼¯æ¨¡å¼ã€åˆ‡åˆ° add æ™‚æ‰æ¸…ç©ºè¡¨å–®
  if (name === 'add' && !editingId) { clearForm(); }
}

function renderAdminList() {
  const list = document.getElementById('adminProductList');
  if (products.length === 0) {
    list.innerHTML = `<p style="text-align:center;color:var(--mid);padding:20px;">é‚„æ²’æœ‰å•†å“ï¼Œå¿«æ–°å¢ç¬¬ä¸€å€‹ï¼</p>`;
    return;
  }
  list.innerHTML = products.map(p => `
    <div class="product-admin-item">
      <div class="product-admin-img">${p.img ? `<img src="${p.img}">` : ''}</div>
      <div class="product-admin-info" style="flex:1;">
        <div style="font-weight:800;font-size:14px;color:var(--deep);">${p.name}</div>
        <div style="font-size:12px;color:var(--mid);">${p.category} ï½œ ${Array.isArray(p.sizes) ? p.sizes.join(', ') : p.sizes}</div>
        ${p.price ? `<div style="font-size:12px;color:var(--coral);font-weight:700;">${p.price}</div>` : ''}
      </div>
      <button class="btn-edit-item" onclick="editProduct('${p.id}')">âœï¸</button>
      <button class="btn-delete" onclick="deleteProduct('${p.id}')">ğŸ—‘ï¸</button>
    </div>
  `).join('');
}

function editProduct(id) {
  const p = products.find(x => String(x.id) === String(id));
  if (!p) return;
  // å…ˆè¨­å®š editingIdï¼Œå†åˆ‡æ›é ç±¤ï¼ˆé€™æ¨£ switchTab å°±ä¸æœƒæ¸…ç©ºè¡¨å–®ï¼‰
  editingId = id;
  switchTab('add', document.querySelectorAll('.admin-tab')[1]);

  // å¡«å…¥å•†å“è³‡æ–™
  currentUploadedUrl = p.img || '';
  document.getElementById('productName').value = p.name || '';
  document.getElementById('productDesc').value = p.desc || '';
  document.getElementById('productCat').value = p.category || 'ä¸Šè¡£';
  document.getElementById('productPrice').value = p.price || '';
  document.getElementById('productTag').value = p.tag || '';

  const prev = document.getElementById('imgPreview');
  if (p.img) { prev.src = p.img; prev.style.display = 'block'; }
  else prev.style.display = 'none';

  document.getElementById('uploadIcon').textContent = p.img ? 'âœ…' : 'â˜ï¸';
  document.getElementById('uploadText').innerHTML = p.img
    ? 'åœ–ç‰‡å·²ä¸Šå‚³ <span style="color:var(--rose);cursor:pointer;" onclick="openCloudinaryWidget()">ï¼ˆé‡æ–°ä¸Šå‚³ï¼‰</span>'
    : 'é»æ“Šä¸Šå‚³åœ–ç‰‡åˆ°é›²ç«¯<br><small style="font-size:11px;opacity:.7;">åœ–ç‰‡å°‡å„²å­˜æ–¼ Cloudinaryï¼Œæ‰€æœ‰äººéƒ½çœ‹å¾—åˆ°</small>';
  document.getElementById('uploadStatus').style.display = 'none';
  document.getElementById('cloudinaryNotice').style.display = 'none';

  // å°ºå¯¸ï¼šç¢ºä¿æ˜¯é™£åˆ—
  const sizes = Array.isArray(p.sizes)
    ? p.sizes
    : String(p.sizes || '').split(',').map(s => s.trim()).filter(s => s);
  renderSizesEditor(sizes);
}

async function deleteProduct(id) {
  if (!confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹å•†å“å—ï¼Ÿ')) return;
  showToast('â³ åˆªé™¤ä¸­...');
  try {
    await apiPost({ action: 'delete', id });
    showToast('ğŸ—‘ï¸ å•†å“å·²åˆªé™¤');
    await loadProducts();
    renderAdminList();
  } catch(e) {
    showToast('âŒ åˆªé™¤å¤±æ•—ï¼Œè«‹é‡è©¦');
  }
}

function cancelEdit() {
  editingId = null;
  clearForm();
  switchTab('list', document.querySelectorAll('.admin-tab')[0]);
}

function clearForm() {
  ['productName','productDesc','productPrice','productTag'].forEach(id => document.getElementById(id).value = '');
  document.getElementById('productCat').value = 'ä¸Šè¡£';
  document.getElementById('imgPreview').style.display = 'none';
  document.getElementById('uploadIcon').textContent = 'â˜ï¸';
  document.getElementById('uploadText').innerHTML = 'é»æ“Šä¸Šå‚³åœ–ç‰‡åˆ°é›²ç«¯<br><small style="font-size:11px;opacity:.7;">åœ–ç‰‡å°‡å„²å­˜æ–¼ Cloudinaryï¼Œæ‰€æœ‰äººéƒ½çœ‹å¾—åˆ°</small>';
  document.getElementById('uploadStatus').style.display = 'none';
  document.getElementById('cloudinaryNotice').style.display = 'none';
  currentUploadedUrl = '';
  renderSizesEditor([]);
}

function renderSizesEditor(selected) {
  const container = document.getElementById('sizesEditor');
  container.innerHTML = AVAILABLE_SIZES.map(s => `
    <button class="size-toggle ${selected.includes(s) ? 'on' : ''}" onclick="toggleSizeBtn(this)">${s}</button>
  `).join('');
}

function toggleSizeBtn(btn) { btn.classList.toggle('on'); }

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CLOUDINARY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function saveCloudinarySettings() {
  cloudName = document.getElementById('cloudName').value.trim();
  uploadPreset = document.getElementById('uploadPreset').value.trim();
  localStorage.setItem('cloudName', cloudName);
  localStorage.setItem('uploadPreset', uploadPreset);
  const msg = document.getElementById('cloudinaryStatusMsg');
  if (cloudName && uploadPreset) {
    msg.style.color = '#05a044';
    msg.textContent = 'âœ… è¨­å®šå·²å„²å­˜ï¼ç¾åœ¨å¯ä»¥ä¸Šå‚³åœ–ç‰‡äº†ã€‚';
  } else {
    msg.style.color = '#856404';
    msg.textContent = 'âš ï¸ è«‹å¡«å¯«å…©å€‹æ¬„ä½æ‰èƒ½ä¸Šå‚³åœ–ç‰‡ã€‚';
  }
}

function openCloudinaryWidget() {
  if (!cloudName || !uploadPreset) {
    document.getElementById('cloudinaryNotice').style.display = 'block';
    return;
  }
  document.getElementById('cloudinaryNotice').style.display = 'none';
  if (!window.cloudinary) {
    const script = document.createElement('script');
    script.src = 'https://upload-widget.cloudinary.com/global/all.js';
    script.onload = () => launchWidget();
    document.head.appendChild(script);
  } else {
    launchWidget();
  }
}

function launchWidget() {
  const widget = window.cloudinary.createUploadWidget(
    {
      cloudName, uploadPreset,
      sources: ['local', 'camera'],
      multiple: false, maxFileSize: 5000000, cropping: false,
      styles: {
        palette: { window: '#FFFFFF', windowBorder: '#E8CCFF', tabIcon: '#FF4F7B',
          menuIcons: '#6B4F8A', textDark: '#3D2B5C', textLight: '#FFFFFF',
          link: '#FF4F7B', action: '#FF4F7B', inactiveTabIcon: '#6B4F8A',
          error: '#F44235', inProgress: '#FF7B54', complete: '#06C755', sourceBg: '#FFF8F0' }
      }
    },
    (error, result) => {
      if (error) { showToast('âŒ ä¸Šå‚³å¤±æ•—ï¼Œè«‹ç¢ºèªè¨­å®šæ˜¯å¦æ­£ç¢º'); return; }
      if (result.event === 'upload-added') {
        document.getElementById('uploadStatus').style.display = 'block';
        document.getElementById('uploadStatus').textContent = 'â³ ä¸Šå‚³ä¸­...';
      }
      if (result.event === 'success') {
        const url = result.info.secure_url;
        currentUploadedUrl = url;
        const prev = document.getElementById('imgPreview');
        prev.src = url; prev.style.display = 'block';
        document.getElementById('uploadStatus').textContent = 'âœ… åœ–ç‰‡å·²ä¸Šå‚³åˆ°é›²ç«¯ï¼';
        document.getElementById('uploadIcon').textContent = 'âœ…';
        document.getElementById('uploadText').innerHTML = 'åœ–ç‰‡å·²ä¸Šå‚³ <span style="color:var(--rose);cursor:pointer;" onclick="openCloudinaryWidget()">ï¼ˆé‡æ–°ä¸Šå‚³ï¼‰</span>';
        showToast('âœ… åœ–ç‰‡ä¸Šå‚³æˆåŠŸï¼');
      }
    }
  );
  widget.open();
}

function previewImage(input) {}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SAVE PRODUCT (to Google Sheets) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function saveProduct() {
  const name = document.getElementById('productName').value.trim();
  if (!name) { showToast('âš ï¸ è«‹è¼¸å…¥å•†å“åç¨±ï¼'); return; }
  const sizes = Array.from(document.querySelectorAll('#sizesEditor .size-toggle.on')).map(b => b.textContent);
  if (sizes.length === 0) { showToast('âš ï¸ è«‹è‡³å°‘é¸ä¸€å€‹å°ºå¯¸ï¼'); return; }

  const imgEl = document.getElementById('imgPreview');
  const img = currentUploadedUrl || (imgEl.style.display !== 'none' ? imgEl.src : '');

  const data = {
    name,
    desc: document.getElementById('productDesc').value.trim(),
    category: document.getElementById('productCat').value,
    price: document.getElementById('productPrice').value.trim(),
    tag: document.getElementById('productTag').value.trim(),
    sizes,
    img,
  };

  const saveBtn = document.querySelector('.btn-save');
  saveBtn.textContent = 'â³ å„²å­˜ä¸­...';
  saveBtn.disabled = true;

  try {
    if (editingId) {
      await apiPost({ action: 'update', id: editingId, ...data });
      showToast('âœ… å•†å“å·²æ›´æ–°ï¼');
    } else {
      await apiPost({ action: 'add', ...data });
      showToast('âœ… å•†å“å·²æ–°å¢ï¼');
    }
    editingId = null;
    clearForm();
    await loadProducts();
    renderAdminList();
    switchTab('list', document.querySelectorAll('.admin-tab')[0]);
  } catch(e) {
    showToast('âŒ å„²å­˜å¤±æ•—ï¼Œè«‹é‡è©¦');
  } finally {
    saveBtn.textContent = 'ğŸ’¾ å„²å­˜å•†å“';
    saveBtn.disabled = false;
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2800);
}

function showAbout() {
  showToast('ğŸ‘¼ å°å¤©ä½¿ç«¥è£ â€” ç”¨æ„›ç‚ºå­©å­é¸æ¯ä¸€ä»¶è¡£è£³ ğŸ’•');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
loadProducts();
updateCartUI();
</script>
</body>
</html>
